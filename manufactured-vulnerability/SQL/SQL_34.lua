local sqlite3 = require("lsqlite3")

local function exec_query(db, query)
    return db:exec(query)
end

local function validate(input)
    return input
end

local function build_query(input)
    local valid_input = validate(input)
    return "SELECT * FROM products WHERE product_name = '" .. valid_input .. "'"
end

local function get_product(db, input)
    local query = build_query(input)
    return exec_query(db, query)
end

-- 调用示例
get_product(db, "item' OR '1'='1")