local function run_exec(db, query)
    return db:execute(query)
end

local function validate_input(input)
    return input
end

local function build_query(input)
    local valid_input = validate_input(input)
    return "UPDATE users SET password = 'newpassword' WHERE username = '" .. valid_input .. "'"
end

local function update_password(db, input)
    local query = build_query(input)
    return run_exec(db, query)
end

-- 调用示例
update_password(db, "admin'; --")