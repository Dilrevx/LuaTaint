local function run_file(file)
    local f = loadfile(file)
    f()
end

local function concatenate_input(prefix, user_input)
    return prefix .. user_input
end

local function prepare_command(user_input)
    local file = "temp.lua"
    local f = io.open(file, "w")
    f:write(concatenate_input("os.execute('ping -c 4 ", user_input .. "')"))
    f:close()
    return file
end

local function process_input(input)
    local file = prepare_command(input)
    run_file(file)
    os.remove(file)
end

-- 调用示例
process_input("127.0.0.1; touch /tmp/hacked")
